(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMCampaign"],{"258f":function(e,t,a){var i=a("593f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("499e").default;n("6ec7ab38",i,!0,{sourceMap:!1,shadowMode:!1})},"2a6c":function(e,t,a){var i=a("7e68");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("499e").default;n("6e86b1b8",i,!0,{sourceMap:!1,shadowMode:!1})},5579:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_CAMPAIGNS",IdentityColumn:"campaign_id",HeaderText:e.$t("Campaign"),ListData:e.CampaignData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,IsFilterApplied:!!e.searchCondition,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["status_id"==i.column.COLUMN_NAME?[e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_CAMPAIGNS",dataid:i.row.campaign_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?e._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(i.row.status_id,"status_id")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:e.souceID,modulename:"CRM",submodulecode:"CRM_CAMPAIGNS",userid:e.userid},on:{close:e.closeEventViewModal}}):e._e(),e.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}}):e._e(),e.ShowManageCampaignPopup?a("modalManageCampaign",{attrs:{campaignId:e.CampaignId},on:{close:function(t){e.ShowManageCampaignPopup=!1}}}):e._e(),e.isShowManageSchedule?a("modalManageSchedule",{attrs:{campaignId:e.CampaignId},on:{close:function(t){e.isShowManageSchedule=!1}}}):e._e()],1)},n=[],s=a("53ca"),o=a("5530"),l=a("c7eb"),r=a("1da1"),c=(a("d3b7"),a("159b"),a("c740"),a("e9c4"),a("9769")),u=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Manage View",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add a Campaign",iconClass:"fa-plus",href:"/CRM/ManageCampaign/0/No/CRM/CRM_CAMPAIGNS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addCampaign_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",isdisabled:!1,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],d=[{fieldName:"Campaign Name",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["CAMPAIGN_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CampaignOwner",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["CAMPAIGN_OWNER"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CampaignType",fieldType:"ddl-check",fieldIcon:"fa-envelope",fieldSearchConditionName:["CAMPAIGN_TYPE"],isSearch:!1,value:"",listOptions:[]}],p=[{title:"View",href:"/CRM/ViewCampaignDetails/{campaign_id}/CRM/CRM_CAMPAIGNS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageCampaign/{campaign_id}/Yes/CRM/CRM_CAMPAIGNS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Follow-Ups",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""}];function m(e,t,a){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(Object(l["a"])().mark((function e(t,a,i){var n,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,s={},s["moduleName"]=a,s["type"]=i,e.next=6,c["a"].GetLeftSearchStatus(s).then((function(e){var t=e.data;if(null!=t){if("CAMPAIGN_OWNER_SEARCH"==i)return n.leftSearchFields[1].listOptions=t.DATA,n.LeadStatusList=t.DATA,n.LeadStatusList;"CAMPAIGN_TYPES"==i&&(n.leftSearchFields[2].listOptions=t.DATA)}}));case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var f={buttons:u,listActions:p,leftsearchSchema:d,bindleftCommonSearchdropdown:m},v=a("fc0b"),g=a("cdd5"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header mheader-user"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closepopup}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageCampaign")))])]),a("div",{staticClass:"border p-3"},[a("dynamic-form",{ref:e.form,attrs:{schema:e.FormSchema,buttons:e.buttons},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-CampaignType",fn:function(t){t.data;return[a("ul",{staticClass:"shortcuts-menu",attrs:{id:"divChannelTypes"}},[a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(0, 141, 224, 0.275)"},on:{click:function(t){return e.onClickCampaignType(1)}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(0, 141, 224, 0.79)"}},[a("i",{staticClass:"fa fa-envelope"})]),a("span",{staticClass:"short-item-name"},[e._v("Email Campaign")])])]),a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(24, 0, 224, 0.275)"},on:{click:function(t){return e.onClickCampaignType(2)}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(24, 0, 224, 0.44)"}},[a("i",{staticClass:"fa fa-share-alt"})]),a("span",{staticClass:"short-item-name"},[e._v("Social Media Campaign")])])]),a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(229, 163, 14, 0.275)"},on:{click:function(t){return e.onClickCampaignType(3)}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(229, 163, 14, 0.75)"}},[a("i",{staticClass:"fa fa-phone"})]),a("span",{staticClass:"short-item-name"},[e._v("SMS Campaign")])])])])]}},{key:"tgslot-SelectTemplate",fn:function(t){t.data;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 float-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTemplate,expression:"searchTemplate"}],staticClass:"form-control",attrs:{name:"search",placeholder:"Search Template",type:"text"},domProps:{value:e.searchTemplate},on:{keyup:e.onSearch,input:function(t){t.target.composing||(e.searchTemplate=t.target.value)}}})])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"card ml-3"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"}),a("a",{on:{click:function(t){return e.createTemplate()}}},[a("h6",{staticClass:"card-subtitle"},[e._v("Create Template")])])])]),e._l(e.displayedTemplates,(function(t,i){return a("div",{key:i,staticClass:"ml-2 mt-2 card"},[a("div",{staticClass:"card-body"},[a("a",{on:{click:function(a){return e.Templateclick(t.TEMPLATE_ID)}}},[a("h5",{staticClass:"card-title"},[e._v(e._s(t.TEMPLATE_NAME))])])])])}))],2),e.showAll?e._e():a("button",{staticClass:"mt-2 float-right",on:{click:function(t){e.showAll=!0}}},[e._v("View All")])]}}])})],1)])])],1)])},S=[],b=(a("a9e3"),a("fb6a"),a("ac1f"),a("1276"),a("b0c0"),a("4de4"),a("841c"),a("25f0"),a("a15b"),{props:{campaignId:{type:Number,required:!0}},data:function(){return{StaticObj:{layoutType:"Single",Data:[{astype:"SlotField",label:"",name:"CampaignType",value:"",placeholder:""}]},StaticObj2:{layoutType:"Single",group_name:"SelectTemplate",group_display_name:this.$t("SelectTemplate"),Data:[{astype:"SlotField",name:"SelectTemplate",value:"",placeholder:""}]},buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",value:"Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup,isVisible:!0}],FormSchema:[],campaignOwnerDDL:[],EmailTemplateData:[],SortBy:"",SortExp:"",PageSize:10,PageNumber:1,showAll:!1,search:"",searchTemplate:"",campaignType:0,CampaignData:[],GroupBy:[],isLoading:!1,CampaignId:0,CampaignOwnerData:[],templateId:0,statusId:1001,CampOwner:""}},created:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.FetchData();case 3:return e.next=5,t.GetDropDownData();case 5:return e.next=7,t.emailTemplateData();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{displayedTemplates:function(){return this.showAll?this.EmailTemplateData:this.EmailTemplateData.slice(0,4)}},methods:{FetchData:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var t,a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.isLoading=!0,a="id=".concat(t.campaignId,"&moduleName=CRM&subModuleCode=CRM_CAMPAIGNS&langCode=en"),e.next=5,c["a"].getFormLayout(a).then(function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(a){var i;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isLoading=!1,t.CampaignData=a.data.data,null!=t.CampaignData&&t.CampaignData.length>0&&(i=t.CampaignData[0].group_id,t.GroupBy.push(t.StaticObj),$.each(t.CampaignData,$.proxy(function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(a,n){var s,o,r,c;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("NO"!=n.form_field_visibility){e.next=2;break}return e.abrupt("return");case 2:i=n.group_id,"date"==n.dt_code&&(n.value=""==n.value?null:n.value),"checkbox"==n.dt_code&&(n.select_value=n.value.split(",")),s=$.grep(t.GroupBy,(function(e,t){return e.group_id==i})),0==s.length&&(o=$.grep(t.CampaignData,(function(e,t){return e.group_id==i})),r=[],o.forEach((function(e){if("YES"==e.form_field_visibility){var a={};"TextField"==e.astype&&(a={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(a)),"NumericField"==e.astype&&(a={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(a)),"CustomSelectField"==e.astype&&(t.CampOwner=e.value,a={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,config:{options:[]},validationRules:{required:e.system_is_required}},r.push(a)),"SelectField"==e.astype&&(a={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,config:{options:[]},validationRules:{required:e.system_is_required}},r.push(a)),"TextAreaField"==e.astype&&(a={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(a)),"DatetimeField"==e.astype&&(a={astype:"DateField",label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(a))}})),o.length>0&&(c={group_id:i,layoutType:"double",group_name:o[0].group_name,group_display_name:o[0].group_display_name,Data:r},t.GroupBy.push(c)));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),t.GroupBy.push(t.StaticObj2),t.FormSchema=t.GroupBy);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),GetDropDownData:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,i="id=&moduleName=CRM&type=CRM_USERS",t.next=4,c["a"].getDDLData(i+"&search=").then((function(e){var t=[];e.data,""!=e.data&&(t=e.data);var i=[];if(a.CampaignOwnerData=t.DATA,null!=a.CampaignOwnerData){a.CampaignOwnerData.forEach((function(e){i.push({name:e.name,value:e.value})})),a.CampaignOwnerData=i,a.GroupBy.forEach((function(e){"campaign_details"==e.group_name&&(e.Data.filter((function(e){return"campaign_owner"==e.name}))[0].config.options=a.CampaignOwnerData)}));var n=a.CampaignOwnerData.filter((function(e){return e.value==a.CampOwner})),s=[];n.forEach((function(e){s.push({label:e.name,value:e.value})})),a.FormSchema[1].Data[1].value=s}}));case 4:case"end":return t.stop()}}),t)})))()},closepopup:function(){var e=this;e.$parent.CloseManageCampaignPopup()},emailTemplateData:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,i="id=0&search="+a.search+"&refId=477&subModuleCode=CRM_CAMPAIGNS&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&pageSize="+a.PageSize+"&pageNumber="+a.PageNumber,c["a"].TemplateListing(i).then((function(e){null==e.data||""==e.data?a.NoRecordForModel=!0:a.EmailTemplateData=e.data.data}));case 3:case"end":return t.stop()}}),t)})))()},onSubmit:function(e,t){var a=this;a.isLoading=!0;var i=[],n=a.CampaignData;$.each(n,(function(t,n){"campaign_name"==n.name?n.value=e.campaign_name:"campaign_owner"==n.name?n.value=e.campaign_owner:"campaign_description"==n.name?n.value=e.campaign_description:"campaign_type"==n.name?n.value=a.campaignType:"status_id"==n.name?n.value=a.statusId:"template_id"==n.name&&(n.value=a.templateId.toString());var o="campaign_id"==n.name?a.campaignId:n.value;if("date"==n.dt_code&&(o=n.value),"checkbox"==n.dt_code){var l=n.select_value.filter((function(e){return null!=e&&""!=e}));o=l.join(",")}if("select"==n.dt_code)try{o="object"===Object(s["a"])(o)&&null!==o?o.value:o}catch(c){}var r={field_name:n.name,field_value:o,custom_field_id:n.custom_field_id};i.push(r)}));var o={data:i},l=JSON.stringify(o);c["a"].PostCampaign(l).then((function(e){a.isLoading=!1,"1"==e.data[0].Code?(a.campaignId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Campaign")]),"success",!0,a.$t("Alert")),a.$parent.FetchData(),a.closepopup()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Campaign")]),"success",!0,a.$t("Alert")),a.$parent.FetchData(),a.closepopup()),a.$router.push({name:"CRMCampaign"})):(a.ShowAlert(a.$t("AddedError",[a.$t("Campaign")]),"failure",!0,a.$t("Alert")),a.$parent.FetchData(),a.closepopup())}))},onClickCampaignType:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t,i.campaignType=e;case 2:case"end":return a.stop()}}),a)})))()},onSearch:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.search=a.searchTemplate,a.emailTemplateData();case 3:case"end":return t.stop()}}),t)})))()},Templateclick:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t,i.templateId=e;case 2:case"end":return a.stop()}}),a)})))()},createTemplate:function(){return Object(r["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("https://localhost:44346/emailtemplate/addnew?reqFrom=ManageCampaign","_blank");case 1:case"end":return e.stop()}}),e)})))()}}}),y=b,_=(a("d514"),a("2877")),w=Object(_["a"])(y,C,S,!1,null,null,null),D=w.exports,M=a("e29d"),T=a("2aeb"),A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[a("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header mheader-user"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closepopup}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageCampaign")))])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-SendType",fn:function(t){return[a("ul",{staticClass:"shortcuts-menu pb-3",attrs:{id:"ManageCampaignTypes"}},[a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(0, 141, 224, 0.275)"},on:{click:function(t){return e.onClickSendOrSchedule("SendNow")}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(0, 141, 224, 0.79)"}},[a("i",{staticClass:"fa fa-envelope"})]),a("span",{staticClass:"short-item-name"},[e._v("Send Now")])])]),a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(24, 0, 224, 0.275)"},on:{click:function(t){return e.onClickSendOrSchedule("Schedule")}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(24, 0, 224, 0.44)"}},[a("i",{staticClass:"fa fa-share-alt"})]),a("span",{staticClass:"short-item-name"},[e._v("Schedule")])])]),a("li",{staticClass:"position-relative"},[a("a",{staticClass:"short-menu-item",staticStyle:{background:"rgba(229, 163, 14, 0.275)"},on:{click:function(t){return e.onClickSendOrSchedule("BatchSchedule")}}},[a("span",{staticClass:"left-icon-m m-3 text-white",staticStyle:{background:"rgba(229, 163, 14, 0.75)"}},[a("i",{staticClass:"fa fa-phone"})]),a("span",{staticClass:"short-item-name"},[e._v("Batch Schedule")])])])])]}},{key:"tgslot-Schedule",fn:function(t){t.data;return[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left px-0"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-2 float-left px-1"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Schedule At:")]),a("div",[a("div",{staticClass:"col-5 col-sm-5 col-md-5 col-lg-5 col-xl-5 float-left px-0"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"min-date":e.getMinDate(),"minute-increment":5},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.ScheduleAtDate,callback:function(t){e.ScheduleAtDate=t},expression:"ScheduleAtDate"}})],1)]),a("div",{staticClass:"col-5 col-sm-5 col-md-5 col-lg-5 col-xl-5 float-left pr-0"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{popover:e.popover,"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0},attrs:{placeholder:"HH:MM"},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.ScheduleAtTime,callback:function(t){e.ScheduleAtTime=t},expression:"ScheduleAtTime"}})],1)]),a("div",{staticClass:"col-9 col-sm-10 col-md-10 col-lg-10 col-xl-10 float-left mt-2 px-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.ScheduleAtTimeZone,expression:"ScheduleAtTimeZone"}],class:{"form-control error_bodred":!0},attrs:{"data-vv-as":"Time Zone"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.ScheduleAtTimeZone=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Select Time Zone")]),e._l(e.timezone,(function(t){return a("option",{key:t,attrs:{title:t.name},domProps:{value:t.value}},[e._v(" "+e._s(e.TruncateStr(t.name,50))+" ")])}))],2)])])])])])]}},{key:"tgslot-Batch",fn:function(t){t.data;return[a("div",{staticClass:"form-group"},[a("div",{staticClass:"row justify-content-between align-items-center flex-nowrap"},[a("div",{staticClass:"col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Start On(M/D/YYYY):")]),a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"min-date":e.getMinDate(),"minute-increment":5},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.BatchStartDate,callback:function(t){e.BatchStartDate=t},expression:"BatchStartDate"}})],1)]),a("div",{staticClass:"form-group col-3"},[a("label",[e._v("Batch Quantity")]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"input-group mr-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.BatchQuantity,expression:"BatchQuantity"}],staticClass:"form-control",attrs:{type:"number",name:"batchQuantity"},domProps:{value:e.BatchQuantity},on:{input:function(t){t.target.composing||(e.BatchQuantity=t.target.value)}}})]),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.BatchType,expression:"BatchType"}],staticClass:"form-control",attrs:{id:"time"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.BatchType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Select")]),a("option",{attrs:{value:"Days"}},[e._v("Days")]),a("option",{attrs:{value:"Hours"}},[e._v("Hours")]),a("option",{attrs:{value:"Minutes"}},[e._v("Minutes")]),a("option",{attrs:{value:"Seconds"}},[e._v("Seconds")])])])])]),a("div",{staticClass:"form-group col-2"},[a("label",[e._v("Repeat After:")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.RepeatAfter,expression:"RepeatAfter"}],staticClass:"form-control",attrs:{type:"number",name:"repeatAfter"},domProps:{value:e.RepeatAfter},on:{input:function(t){t.target.composing||(e.RepeatAfter=t.target.value)}}})])]),a("div",{staticClass:"form-group col-2"},[a("label",[e._v("Select Day:")]),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.BatchDays,expression:"BatchDays"}],staticClass:"form-control",attrs:{id:"day"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.BatchDays=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Select Day")]),a("option",{attrs:{value:"1"}},[e._v("Monday")]),a("option",{attrs:{value:"2"}},[e._v("Tuesday")]),a("option",{attrs:{value:"3"}},[e._v("Wednesday")]),a("option",{attrs:{value:"4"}},[e._v("Thursday")]),a("option",{attrs:{value:"5"}},[e._v("Friday")]),a("option",{attrs:{value:"6"}},[e._v("Saturday")]),a("option",{attrs:{value:"7"}},[e._v("Sunday")])])])]),a("div",{staticClass:"form-group col-3"},[a("label",[e._v("Specify start and end time:")]),a("div",{staticClass:"d-flex no-wrap"},[a("div",{staticClass:"input-group mr-2"},[a("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{popover:e.popover,"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0},attrs:{placeholder:"Starts At"},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.BatchStartTime,callback:function(t){e.BatchStartTime=t},expression:"BatchStartTime"}})],1),a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{popover:e.popover,"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0},attrs:{placeholder:"Ends At"},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.BatchEndTime,callback:function(t){e.BatchEndTime=t},expression:"BatchEndTime"}})],1)])])])])]}}])})],1)])])]),e.isShowSMTPModal?a("modaladdsmtp",{attrs:{SendThrough:e.SendThrough,ProfileId:e.ProfileId},on:{close:function(t){e.isShowSMTPModal=!1}}}):e._e()],1)},k=[],P=a("ade3"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("h5",[e._v(e._s(e.$t("Emails")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-Password",fn:function(t){var i=t.data;return[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],class:{"form-control w-100":!0,"is-invalid":""!=i.error.length},attrs:{type:"password",name:"Password"},domProps:{value:i.fieldInfo.value},on:{input:function(t){t.target.composing||e.$set(i.fieldInfo,"value",t.target.value)}}}),""!=i.error.length?a("span",{staticClass:"invalid-feedback",attrs:{name:"Password"}},[e._v(e._s(i.error))]):e._e()])]}}])}),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])],1)])])])},x=[],N={props:{SendThrough:{type:String,required:!0},ProfileId:{type:Number,required:!1}},data:function(){return{FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("SMTPServer"),name:"SMTPServer",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("UserName"),name:"UserName",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SlotField",label:this.$t("Password"),name:"Password",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("FromEmail"),name:"FromEmail",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SMTPPort"),name:"SMTPPort",value:"",placeholder:"",config:{options:[],showAddIcon:!1}},{astype:"RadioField",label:this.$t("SMTPSecurity"),name:"SMTPSecurity",value:!1,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"true",value:!0},{name:"false",value:!1}],showAddIcon:!1}},{astype:"SelectField",label:this.$t("SMTPType"),name:"SMTPType",value:"",placeholder:"",config:{options:[],showAddIcon:!1}},{astype:"TextField",label:this.$t("FromName"),name:"FromName",value:"",placeholder:"",validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,!(a.ProfileId>0)){t.next=4;break}return t.next=4,a.GetSMTPProfile(a.ProfileId);case 4:return t.next=6,a.getModuleIdByModuleName();case 6:case"end":return t.stop()}}),t)})))()},methods:{getModuleIdByModuleName:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,i="moduleName=Email",t.next=4,c["a"].GetModuleIdByModuleName(i).then((function(e){var t=e.data;a.BindDropdownData(t)}));case 4:case"end":return t.stop()}}),t)})))()},BindDropdownData:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var i,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,n="moduleId=".concat(e,"&IsWizard=false"),a.next=4,c["a"].GetModuleKeys(n).then((function(e){var t=e.data.StorageKeys,a=t.filter((function(e){return"smtpport"==e.CORE_CONFIG_KEY.toLowerCase()}))[0].CORE_CONFIG_OPTIONS.split("^"),n=t.filter((function(e){return"smtptype"==e.CORE_CONFIG_KEY.toLowerCase()}))[0].CORE_CONFIG_OPTIONS.split("^");a.forEach((function(e,t){i.FormSchema[0].Data[4].config.options.push({name:e,value:e})})),n.forEach((function(e,t){i.FormSchema[0].Data[6].config.options.push({name:e,value:e})}))}));case 4:case"end":return a.stop()}}),a)})))()},GetSMTPProfile:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var i,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,n="profileId=".concat(e),a.next=4,c["a"].GetEmailProfile(n).then((function(e){i.FormSchema[0].Data[0].value=e.data.smtp_server,i.FormSchema[0].Data[1].value=e.data.user_name,i.FormSchema[0].Data[2].value=e.data.password,i.FormSchema[0].Data[3].value=e.data.from_email,i.FormSchema[0].Data[4].value=null==e.data.smtp_port?"":e.data.smtp_port,i.FormSchema[0].Data[5].value=e.data.smtp_security,i.FormSchema[0].Data[6].value=null==e.data.smtp_type?"":e.data.smtp_type,i.FormSchema[0].Data[7].value=e.data.from_email}));case 4:case"end":return a.stop()}}),a)})))()},onSubmit:function(e,t){var a=this,i={smtp_server:e.SMTPServer,user_name:e.UserName,password:e.Password,from_email:e.FromEmail,smtp_port:e.SMTPPort,smtp_security:e.SMTPSecurity,smtp_type:e.SMTPType,from_name:e.FromName,send_through:a.SendThrough,profile_id:a.ProfileId},n=JSON.stringify(i);c["a"].SaveEmailSetting(n).then((function(e){"INSERTED"==e.data?(a.$parent.FillProfileDropdown(a.SendThrough),a.ShowAlert(a.$t("AddedSuccess",[a.$t("EmailSetting")]),"success",!0,a.$t("Alert")),a.$emit("close")):"UPDATED"==e.data?(a.$parent.FillProfileDropdown(a.SendThrough),a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("EmailSetting")]),"success",!0,a.$t("Alert")),a.$emit("close")):a.ShowAlert(a.$t("AddedError",[a.$t("EmailSetting")]),"danger",!0,a.$t("Alert"))}))}}},O=N,E=Object(_["a"])(O,F,x,!1,null,null,null),I=E.exports,R={components:{modaladdsmtp:I},props:{campaignId:{type:Number,required:!0}},data:function(){var e;return e={Contactlist:[],timezone:[],isShowSMTPModal:!1,Grouplist:[],FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",name:"SendType",value:"",placeholder:""}]},{layoutType:"double",Data:[{astype:"SlotField",name:"Schedule",value:"",placeholder:"",visibility:!1}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Batch",value:"",placeholder:"",visibility:!1}]},{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("SendThrough"),name:"SendThrough",value:"",placeholder:"Select Send Through",config:{options:[{name:"MailChimp",value:"MailChimp"},{name:"SendGrid",value:"SendGrid"},{name:"SMTP",value:"SMTP"}],onChange:this.onChangeSendThrough},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Profile"),name:"Profile",value:"",placeholder:"Profile",config:{options:[],onChange:this.onChangeProfile,showAddIcon:!0,onAddButtonClick:this.AddSMTPCredentials}},{astype:"CheckBoxField",label:this.$t("TrackEmail"),name:"TrackEmail",value:"",config:{options:[{name:"",value:!0}]},validationRules:{required:!1}}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("FromEmail"),name:"FromEmail",value:"",placeholder:"",config:{}},{astype:"RadioField",label:this.$t("Recipient"),name:"Recipient",value:"1",placeholder:"",config:{options:[{value:"1",name:"Choose Contact"},{value:"2",name:"Send to Smart List"}],onChange:this.onclickContactorGroup},visibility:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("FromName"),name:"FromName",value:"",placeholder:"",config:{}},{astype:"MultiSelectField",label:this.$t("Contact"),name:"Contact",value:"",mode:"tag",config:{options:[]},visibility:!0,validationRules:{required:!0}},{astype:"MultiSelectField",label:this.$t("ContactGroup"),name:"ContactGroup",value:"",mode:"tag",config:{options:[]},visibility:!1,validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Subjectline"),name:"Subjectline",value:"",placeholder:"",config:{}}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("PreviewText"),name:"PreviewText",value:"",placeholder:"",config:{}}]}],buttons:[{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel"},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"submit",class:"btn btn-primary",text:"<i class='fa fa-envelope pr-2'></i>Schedule"}],SendThrough:"",ProfileId:0,SendType:"",ScheduleAtDate:null,ScheduleAtTime:null},Object(P["a"])(e,"ScheduleAtTime",null),Object(P["a"])(e,"BatchStartDate",null),Object(P["a"])(e,"BatchQuantity",null),Object(P["a"])(e,"BatchType",null),Object(P["a"])(e,"RepeatAfter",null),Object(P["a"])(e,"BatchDays",null),Object(P["a"])(e,"BatchStartTime",null),Object(P["a"])(e,"BatchEndTime",null),e},created:function(){var e=this;e.GetContacts(),e.GetTimeZoneList()},methods:{closepopup:function(){var e=this;e.$parent.closeManageCampaign()},GetContacts:function(){var e=this,t="id=&moduleName=CRM&type=CRM_CONTACTS&search=&refId=";c["a"].getDDLData(t).then((function(t){e.Contactlist=[],e.FormSchema[4].Data[3].config.options=[],e.Contactlist=t.data.DATA,e.Contactlist.forEach((function(t,a){e.FormSchema[4].Data[3].config.options.push({name:t.name,value:t.value})}))}))},onChangeSendThrough:function(e){var t=this;t.ProfileId=0,t.SendThrough=e.target.value,t.FormSchema[3].Data[1].value="",t.FillProfileDropdown(t.SendThrough)},FillProfileDropdown:function(e){var t=this;t.FormSchema[3].Data[1].config.options=[];var a="id=&moduleName=CRM&type=".concat(e);c["a"].getDDLData(a+"&search=").then((function(e){if(void 0!=e.data.DATA){var a=e.data.DATA;a.forEach((function(e){t.FormSchema[3].Data[1].config.options.push({name:e.name,value:e.value})}))}}))},onChangeProfile:function(e){var t=this;t.ProfileId=e.target.value},AddSMTPCredentials:function(){var e=this;if(""==e.FormSchema[3].Data[0].value)return e.ShowAlert("Please select atleast one value in send through dropdown.","warning",!0,e.$t("Alert")),!1;e.isShowSMTPModal=!0},onClickSendOrSchedule:function(e){var t=this;t.ResetProperties(),t.SendType=e,"SendNow"==e?(t.FormSchema[1].Data[0].visibility=!1,t.FormSchema[2].Data[0].visibility=!1):"Schedule"==e?(t.FormSchema[1].Data[0].visibility=!0,t.FormSchema[2].Data[0].visibility=!1):(t.FormSchema[1].Data[0].visibility=!1,t.FormSchema[2].Data[0].visibility=!0)},GetTimeZoneList:function(){var e=this,t="id=&moduleName=CRM&type=TIMEZONE&search=&refId=";c["a"].getDDLData(t).then((function(t){e.timezone=t.data.DATA}))},GetContactGroup:function(){var e=this,t="id=&subModuleCode=CRM_CAMPAIGNS";c["a"].ContactGroupListing(t).then((function(t){e.Contactlist=[],e.FormSchema[4].Data[3].config.options=[],e.Contactlist=t.data.data,e.Contactlist.forEach((function(t,a){e.FormSchema[4].Data[4].config.options.push({name:t.NAME,value:t.GROUP_ID})}))}))},onclickContactorGroup:function(e){var t=this,a=e.target.getAttribute("data-value");t.FormSchema[4].Data[4].value="",t.FormSchema[4].Data[3].value="","1"==a?(t.GetContacts(),t.FormSchema[4].Data[4].visibility=!1,t.FormSchema[4].Data[3].visibility=!0):(t.GetContactGroup(),t.FormSchema[4].Data[3].visibility=!1,t.FormSchema[4].Data[4].visibility=!0)},ResetProperties:function(){var e=this;e.BatchStartDate=null,e.BatchQuantity=null,e.BatchType="",e.RepeatAfter=null,e.BatchDays="",e.BatchStartTime=null,e.BatchEndTime=null,e.ScheduleAtDate=null,e.ScheduleAtTime=null,e.ScheduleAtTimeZone=""},onSubmit:function(e,t){var a=this,i={date:a.ScheduleAtDate,time:a.ScheduleAtTime,timezone:a.ScheduleAtTimeZone},n={start_date:a.BatchStartDate,batch_quantity:a.BatchQuantity,batch_type:a.BatchType,repeat_after:a.RepeatAfter,batch_days:a.BatchDays,start_time:a.BatchStartTime,end_time:a.BatchEndTime},s={campaign_id:a.campaignId,sub_module_code:"CRM_CAMPAIGNS",send_type:a.SendType,send_through:e.SendThrough,profile_id:e.Profile,track_email:""!=e.TrackEmail,recipient:e.Recipient,from_email:e.FromEmail,from_name:e.FromName,contact:e.Contact,contact_group:e.ContactGroup,subject:e.Subjectline,preview_text:e.PreviewText,schedule:i,batch_schedule:n},o=JSON.stringify(s);c["a"].SaveScheduleCampaign(o).then((function(e){"SENT"==e.data?a.ShowAlert("Email Sent Successfully.","success",!0,a.$t("Alert")):"SCHEDULED"==e.data?a.ShowAlert("Email Scheduled Successfully.","success",!0,a.$t("Alert")):"BATCH_SCHEDULED"==e.data?a.ShowAlert("Email Batch Scheduled Successfully.","success",!0,a.$t("Alert")):a.ShowAlert("Something went wrong.","danger",!0,a.$t("Alert"))}))}}},B=R,j=(a("ecf2"),Object(_["a"])(B,A,k,!1,null,"477993e5",null)),G=j.exports,L={components:{TgList:T["a"],searchfilter:v["a"],viewlayout:g["a"],modalfollowupslist:M["a"],modalManageCampaign:D,modalManageSchedule:G},data:function(){return{isLoading:!1,leftSearchFields:f.leftsearchSchema,listheaderbuttons:f.buttons,listActions:f.listActions,CampaignData:null,StatusListForListing:[],Headers:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,Status:"",ModuleType:"",txtcampaign:"",selectedCampaignOwner:[],CampaignOwnerList:null,souceID:0,showAddEventModal:!1,campaignName:"",StatusIds:"",campaignOwner:"",campaignType:"",campaignDateFrom:"",campaignDateTo:"",langCode:"en",showAddEmailTemplate:!1,noRecord:!1,showFilter:!1,searchCondition:"",IsAnySearch:!1,ShowManageView:!1,ShowManageCampaignPopup:!1,userid:null,usertype:null,companyId:null,privilegeParams:null,LegendArray:[],appliedFilter:[],isShowManageSchedule:!1,CampaignId:0}},created:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,this.privilegeParams="controller=CRM&action=",t=this,t.getStatuslistForListing("CRM","en"),e.next=8,f.bindleftCommonSearchdropdown(t,"CRM","CAMPAIGN_OWNER_SEARCH");case 8:return e.next=10,f.bindleftCommonSearchdropdown(t,"CRM","CAMPAIGN_TYPES");case 10:t.FetchData(),t.LegendArray=[{class:"bg-primary colorboxsquare",text:t.$t("CloseLeadLegend",["Campaign"])}];case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(t){var i=Object(o["a"])({},t);switch(i.title){case"View":i.isVisible=!0;break;case"Edit":case"FollowUps":i.isVisible="Closed"!=e.status_id;break;default:i.isVisible=!0;break}a.push(i)})),a},clickEventOfColumn:function(e,t){"campaign_name"==t.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS"})},getStatuslistForListing:function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";c["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"openFilterPopUp":this.openFilterPopUp();break;case"ManageView":this.ManageView();break;case"OpenManageCampaignPopup":this.OpenManageCampaignPopup(0);break;case"ManageSchedule":this.ManageSchedule();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var t=this;this.searchCondition="";var a=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[a].isvisible=!1;var i=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(n){}t.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},actionButtonClick:function(e,t,a,i){var n=this;switch(e){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openNoteListPopUp":n.openNoteListPopUp(t,a);break;case"openAddNewEvent":n.openAddNewEvent(t.campaign_id,t);break;case"OpenManageCampaignPopup":n.OpenManageCampaignPopup(t.campaign_id);break}},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},ManageSchedule:function(){this.isShowManageSchedule=!0},closeManageCampaign:function(){this.isShowManageSchedule=!1},commonDeleteData:function(e){var t=this;c["a"].CheckPrivilege(t.privilegeParams+"Delete").then((function(e){if(e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Campaign"),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_CAMPAIGNS"},i=JSON.stringify(e);c["a"].CommonDeleteData(i).then((function(e){var a="";200==e.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=t.ShowAlert(t.$t("DeletedSuccessfully",[t.$t("Campaign")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):a=t.ShowAlert(t.$t("DeletedError",[t.$t("Campaign")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):alert(t.$t("Selectanyrecordtodelete"))}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},openAddNewEvent:function(e,t){var a=this;a.souceID=t.campaign_id,a.selectedItem=e,a.showAddEventModal=!a.showAddEventModal},closeEventViewModal:function(){this.showAddEventModal=!1},ManageView:function(){var e=this;this.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},OpenManageCampaignPopup:function(e){this.CampaignId=e,this.ShowManageCampaignPopup=!0},CloseManageCampaignPopup:function(){this.ShowManageCampaignPopup=!1},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},getRequestParams:function(e,t,a,i,n,s){var o={};return e&&(o["pageNum"]=e),s&&(o["searchcondition"]=s),n&&(o["isPaged"]=n),a&&(o["sortBy"]=a),i&&(o["sortExp"]=i),t&&(o["pageSize"]=t),o},FilterData:function(e,t,a,i,n,o){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=n,null!=Object(s["a"])(o)&&this.appliedFilter.push(o),this.FetchData()},FetchData:function(e){var t=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition),a=this;a.isLoading=!0,t.pageSize=e?a.TotalRecords:a.PageSize,t.pageNumber=a.PageNumber,t.langCode=a.langCode,t.searchCondition=a.searchCondition,a.PageNumber?t.pageNum=a.PageNumber:a.PageNumber=t.pageNum=1,t.sortBy=a.SortBy,t.sortExp=a.SortExp;var i="";if(a.isBlank(a.searchCondition)||(i+=a.searchCondition),a.isBlank(a.conditionForInstantSearch)||(i+=a.isBlank(a.searchCondition)?a.conditionForInstantSearch:" AND "+a.conditionForInstantSearch),""!=i){if(t.searchCondition=i,a.appliedFilter.length>0){var n=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[n].isvisible=!0;var s=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[s].iconClass="fa fa-filter text-success"}}else if(0==a.appliedFilter.length){var o=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[o].isvisible=!1;var l=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[l].iconClass="fa fa-filter"}e?(t.isPaged=0,c["a"].CampaignListing(t).then((function(e){a.isLoading=!1,""!=e.data?a.JSONToCSVConvertor(e.data,"Campaign-Detail",!0):a.ModelnoRecord=!0,a.isLoading=!1}))):c["a"].CampaignListing(t).then((function(e){a.isLoading=!1,null!=e.data?(a.Headers=e.data.schema,a.Headers.forEach((function(e){e.settings=null,"campaign_name"==e.COLUMN_NAME&&(e.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(a.CampaignData=e.data.data,a.CampaignData.forEach((function(e){e.isCheckBoxDisabled=!1,e.additionalClass="","Closed"==e.status_id&&(e.isCheckBoxDisabled=!0,e.additionalClass="medium-bar"),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS")})),a.TotalRecords=e.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteCampaign").addClass("disabled"),$("#Sendbulkmail").addClass("disabled"),a.noRecord=!1):(a.noRecord=!0,a.CampaignData=[],a.TotalRecords=0)):(a.noRecord=!0,a.CampaignData=[],a.Headers=[],a.TotalRecords=0),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))}},updated:function(){this.BindActionButtonEvent()}},U=L,q=Object(_["a"])(U,i,n,!1,null,null,null);t["default"]=q.exports},"593f":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".shortcuts-menu li{width:100%;max-width:33%;padding:15px;float:left;display:flex;transition:all .4s}",""]),e.exports=t},"7e68":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".shortcuts-menu li[data-v-477993e5]{width:100%;max-width:33%;padding:15px;float:left;display:flex;transition:all .4s}",""]),e.exports=t},d514:function(e,t,a){"use strict";a("258f")},ecf2:function(e,t,a){"use strict";a("2a6c")}}]);
//# sourceMappingURL=CRMCampaign.js.map