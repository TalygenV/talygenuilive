(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Contract"],{3141:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{ref:"tgList",attrs:{IsShowAction:!0,showCheckBox:!0,ModuleName:"CRM",SubModuleCode:"CRM_CONTRACTS",IdentityColumn:"contract_id",HeaderText:t.$t("Contract"),ListData:t.ContractData,HeaderData:t.Headers,ViewList:t.ViewList,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,LegendArray:t.LegendArray,IsFilterApplied:!!t.searchCondition,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ApplyView:t.OnApplyView,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,ActionButtonClick:t.actionButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["status_id"==i.column.COLUMN_NAME?[t.isCRMShowStausDrop(i.row.status_id,"CRM_CONTRACTS")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_CONTRACTS",dataid:i.row.contract_id,"data-controller":"Crm",statuslist:t.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:t.FetchData,isselectedvaluestring:!0}}):t._e(),t.isCRMShowStausDrop(i.row.status_id,"CRM_CONTRACTS")?t._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:t.getStatusClass(i.row.status_id,"status_id")},[t._v(" "+t._s(i.row[i.column.COLUMN_NAME])+" ")])])]:t._e()]}}])}),t.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_CONTRACTS",modulename:"CRM",callbackfunction:t.FetchData},on:{close:function(e){t.showFilter=!1},FilterData:t.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Search")))])]):t._e(),t.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:t.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_CONTRACTS",modulename:"CRM",callbackfunction:t.FetchData,usertype:t.usertype},on:{close:function(e){t.ShowManageView=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Search")))])]):t._e(),t.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:t.souceID,modulename:"CRM",submodulecode:"CRM_CAMPAIGNS",userid:t.userid},on:{close:t.closeEventViewModal}}):t._e(),t.showAddEmailTemplate?a("ModelSendBulkEmail",{attrs:{callFrom:"ContractDetails",selectedids:t.modalItem,submodulecode:t.$route.params.subModuleCode},on:{close:function(e){t.showAddEmailTemplate=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("SendEmail")))])]):t._e()],1)},s=[],o=a("53ca"),l=a("5530"),n=a("c7eb"),r=a("1da1"),c=(a("d3b7"),a("159b"),a("a434"),a("e9c4"),a("498a"),a("c740"),[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Contract",iconClass:"fa-plus",href:"/CRM/ManageContract/0/CRM/CRM_CONTRACTS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addContract_a"},{title:"Export To Excel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",isdisabled:!1,isvisible:!0},{id:"Sendbulkmail",title:"Send Email",iconClass:"fa-envelope",callbackfunction:"sendBulkEmail",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}]),d=[{title:"View",href:"/CRM/ViewContractDetails/{contract_id}/CRM/CRM_CONTRACTS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageContract/{contract_id}/CRM/CRM_CONTRACTS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Follow-Ups",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""}],u=[{fieldName:"Contract Name",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["contract_Name"],isSearch:!1,value:"",listOptions:[]}],h={buttons:c,listActions:d,leftsearchSchema:u},m=a("9769"),p=a("fc0b"),f=a("cdd5"),C=a("e29d"),S=a("b32d"),_={components:{ContractDataService:m["a"],viewlayout:f["a"],ModelSendBulkEmail:S["a"],searchfilter:p["a"],modalfollowupslist:C["a"]},data:function(){return{ViewListId:"",ViewList:[],isLoading:!1,listheaderbuttons:h.buttons,listActions:h.listActions,leftSearchFields:h.leftsearchSchema,ContractData:null,StatusListForListing:[],Headers:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,Status:"",ModuleType:"",souceID:0,showAddEventModal:!1,StatusIds:"",langCode:"EN",showAddEmailTemplate:!1,noRecord:!1,showFilter:!1,searchCondition:"",IsAnySearch:!1,ShowManageView:!1,conditionForInstantSearch:"",userid:null,usertype:null,LegendArray:[],appliedFilter:[]}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType;var t=this;t.getStatuslistForListing("CRM","en"),t.FetchData(),t.GetDdlRecords_ViewList(),t.LegendArray=[{class:"bg-primary colorboxsquare",text:t.$t("CloseLeadLegend",["Contract"])}]},methods:{GetDdlRecords_ViewList:function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(){var e,a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.ViewList=[],a="moduleName=CRM&subModuleCode=CRM_CONTRACTS&viewId=0&pageSize=100&pageNum=1&sortBy=&sortExp=",t.next=5,m["a"].GetViewList(a).then((function(t){t.data&&"undefined"!=typeof t.data.DATA&&(e.ViewList=t.data.DATA);var a=0;e.ViewListId="0",null==e.ViewList||""==e.ViewList||e.ViewList.forEach((function(t){t.IS_SLECTED_USER_ID>0&&(a+=1,e.ViewListId=t.VIEW_ID)}));var i=0;a>0?e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):null==e.ViewList||""==e.ViewList?e.ViewList.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}),setTimeout((function(){e.ViewListId>0?e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId=e.ViewListId:e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId="0"}),1e3)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),DefaultView:function(){var t=this,e={ModuleName:"CRM",SubmoduleCode:"CRM_CONTRACTS"},a=JSON.stringify(e);m["a"].ClearView(a).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(t.ShowAlert(t.$t("ClearSuccess",[t.$t("DefaultView")]),"success",!0,t.$t("Alert")),t.FetchData()):t.ShowAlert(t.$t("ErrorWhileProcessingRequest"),"failure",!0,t.$t("Alert"))}))},OnApplyView:function(t){var e=this;if("0"==t)e.DefaultView();else{var a={ViewId:t,ModuleName:"CRM",SubmoduleCode:"CRM_CONTRACTS"},i=JSON.stringify(a);m["a"].ApplyView(i).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ApplySuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.$emit("RefreshManageView"),e.FetchData()):e.ShowAlert(e.$t("AddedError",[e.$t("View")]),"failure",!0,e.$t("Alert"))}))}},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(e){var i=Object(l["a"])({},e);switch(i.title){case"View":i.isVisible=!0;break;case"Edit":i.isVisible="Closed"!=t.status_id;break;case"FollowUps":i.isVisible="Closed"!=t.status_id;break;default:i.isVisible=!0;break}a.push(i)})),a},clickEventOfColumn:function(t,e){"contract_name"==e.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewContractDetails/"+t.contract_id+"/CRM/CRM_CONTRACTS"})},sendBulkEmail:function(t){var e="",a="";if($(".chkItems:checkbox:checked").not("[id^='chkAll']").not(".CloseLeadInput").each((function(){a.length>0&&(a+=","),a+=$(this).val(),e=a})),null==e)return!1;this.modalItem=e,this.showAddEmailTemplate=!0},Searchdata:function(t){this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.conditionForInstantSearch="",this.IsAnySearch=!1,""!=$.trim(this.contractName)&&(this.IsAnySearch=!0,this.conditionForInstantSearch+=""!=$.trim(this.conditionForInstantSearch)?" AND":"",this.conditionForInstantSearch+=" CON.CONTRACT_NAME LIKE '%"+this.contractName+"%'"),this.FetchData()},getStatuslistForListing:function(t,e){var a=this,i="langCode="+e+"&statusType="+t+"&hasglobal=true";m["a"].statusdropdown(i).then((function(t){if("Success"==t.data.status){var e=t.data.result;a.StatusListForListing=e.data}}))},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},actionButtonClick:function(t,e,a,i){var s=this;switch(t){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openNoteListPopUp":s.openNoteListPopUp(e,a);break;case"openAddNewEvent":s.openAddNewEvent(e,e.contract_id);break}},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},ManageView:function(){var t=this;this.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3)},openAddNewEvent:function(t,e){var a=this;a.souceID=e,a.selectedItem=t,a.showAddEventModal=!a.showAddEventModal},closeEventViewModal:function(){this.showAddEventModal=!1},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},getRequestParams:function(t,e,a,i,s,o,l){var n={};return t&&(n["pageNum"]=t),o&&(n["searchcondition"]=o),s&&(n["isPaged"]=s),a&&(n["sortBy"]=a),i&&(n["sortExp"]=i),e&&(n["pageSize"]=e),l&&(n["contract_Name"]=contractName),n},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"openFilterPopUp":this.openFilterPopUp();break;case"ManageView":this.ManageView();break;case"sendBulkEmail":this.sendBulkEmail();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var e=this;this.searchCondition="";var a=e.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));e.listheaderbuttons[a].isvisible=!1;var i=e.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));e.listheaderbuttons[i].iconClass="fa fa-filter";try{e.appliedFilter=[]}catch(s){}e.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0,this);break}},openFilterPopUp:function(t){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.contractName="",this.FetchData()},FilterData:function(t,e,a,i,s,l,n){this.pageNum=t,this.pageSize=e,this.sortBy=a,this.sortExp=i,this.contract_Name=n,this.searchCondition=s,null!=Object(o["a"])(l)&&this.appliedFilter.push(l),this.FetchData()},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Contract"),(function(){var t={ids:a,moduleName:"CRM",subModuleCode:"CRM_CONTRACTS"},i=JSON.stringify(t);m["a"].CommonDeleteData(i).then((function(t){200==t.status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Contract")]),"Success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Contract")]),"Success",!0,e.$t("Alert"))}))})):ShowAlert(e.$t("Selectanyrecordtodelete"))},FetchData:function(t){var e=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition,this.contract_Name),a=this;this.isLoading=!0,e.pageSize=t?a.TotalRecords:a.PageSize,e.pageNumber=a.PageNumber,e.langCode=a.langCode,e.searchCondition=a.searchCondition,e.contract_Name=a.contractName,a.PageNumber?e.pageNum=a.PageNumber:a.PageNumber=e.pageNum=1,e.sortBy=a.SortBy,e.sortExp=a.SortExp;var i="";if(this.isBlank(this.searchCondition)||(i+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(i+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=i){if(e.searchCondition=i,a.appliedFilter.length>0){var s=a.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));a.listheaderbuttons[s].isvisible=!0;var o=a.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));a.listheaderbuttons[o].iconClass="fa fa-filter text-success"}}else if(0==a.appliedFilter.length){var l=a.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));a.listheaderbuttons[l].isvisible=!1;var n=a.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));a.listheaderbuttons[n].iconClass="fa fa-filter"}t?(e.isPaged=0,m["a"].ContractListing(e).then((function(t){""!=t.data?a.JSONToCSVConvertor(t.data,"Contract-Detail",!0):a.ModelnoRecord=!0,a.isLoading=!1}))):m["a"].ContractListing(e).then((function(t){null!=t.data?(a.Headers=t.data.schema,a.Headers.forEach((function(t){t.DISPLAY_NAME=a.$t(t.DISPLAY_NAME?t.DISPLAY_NAME:t.COLUMN_NAME),t.settings=null,"contract_name"==t.COLUMN_NAME&&(t.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})})),t.data.data.length>0?(a.ContractData=t.data.data,a.ContractData.forEach((function(t){t.isCheckBoxDisabled=!1,t.additionalClass="","Closed"==t.status_id&&(t.isCheckBoxDisabled=!0,t.additionalClass="medium-bar"),t.rowDetailsUrl="",""==t.rowDetailsUrl&&(t.rowDetailsUrl="/CRM/ViewContractDetails/"+t.contract_id+"/CRM/CRM_CONTRACTS")})),a.TotalRecords=t.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,a.listheaderbuttons[5].isdisabled=!0,a.listheaderbuttons[6].isdisabled=!0,a.GetDdlRecords_ViewList(),a.noRecord=!1):(a.noRecord=!0,a.ContractData=[],a.TotalRecords=0)):(a.noRecord=!0,a.ContractData=[],a.Headers=[],a.TotalRecords=0),a.isLoading=!1}))}}},b=_,v=(a("7d55"),a("2877")),g=Object(v["a"])(b,i,s,!1,null,null,null);e["default"]=g.exports},"66f6":function(t,e,a){var i=a("e615");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("7cfb7078",i,!0,{sourceMap:!1,shadowMode:!1})},"7d55":function(t,e,a){"use strict";a("66f6")},b32d:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",[t._v(t._s(t.$t("SendEmail")))])]})),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,s=e.errors;return[a("div",{},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email Subject",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailSubject,expression:"emailSubject"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",maxlength:50,name:"emailSubject",disabled:t.isView},domProps:{value:t.emailSubject},on:{input:function(e){e.target.composing||(t.emailSubject=e.target.value)}}}),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email Subject"}},[t._v(t._s(i[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("EmailTemplate"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email TemplateValue",rules:{required:!0},label:"Email"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("select",{class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"",name:"emailtemplateValue"},domProps:{value:t.emailtemplateValue},on:{change:t.getSelectedValue}},[a("option",{attrs:{value:""}},[t._v(" "+t._s(t.$t("Select"))+" "+t._s(t.$t("EmailTemplate"))+" ")]),t._l(t.emailtemplate,(function(e,i){return a("option",{key:i,domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email TemplateValue"}},[t._v(t._s(i[0]))])]}}],null,!0),model:{value:t.emailtemplateValue,callback:function(e){t.emailtemplateValue=e},expression:"emailtemplateValue"}})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Priority"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email PriorityValue",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.emailPriorityValue,expression:"emailPriorityValue"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"emailPriorityValue",name:"emailPriorityValue"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.emailPriorityValue=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v(" "+t._s(t.$t("Select"))+" "+t._s(t.$t("Priority"))+" ")]),a("option",{attrs:{value:"normal"}},[t._v(t._s(t.$t("Normal"))+" ")]),a("option",{attrs:{value:"low"}},[t._v(" "+t._s(t.$t("Low"))+" ")]),a("option",{attrs:{value:"high"}},[t._v(" "+t._s(t.$t("High"))+" ")])]),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Email PriorityValue"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]),"CampaignDetails"!=t.callFrom?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("ckeditor",{staticStyle:{height:"400px"},attrs:{editor:t.editor},model:{value:t.Description,callback:function(e){t.Description=e},expression:"Description"}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e()]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("div",{staticClass:"py-2"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-2",attrs:{href:"javascript:;"},on:{click:function(e){return t.saveEmail(i,s)}}},[a("em",{staticClass:"fa fa-send pr-2"}),t._v(t._s(t.$t("Send"))+" ")]),a("a",{staticClass:"btn btn-danger formbtn widthhalf text-white",on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])])]),a("div",{staticClass:"col-lg-6 pt-2"},[a("small",{staticClass:"text-danger"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])])])])]}}])})],1)])])])])},s=[],o=(a("a9e3"),a("e9c4"),a("9769")),l={props:{selectedids:null,userid:{type:Number,required:!0},companyid:{type:Number,required:!0},templatename:{type:String,required:!0},selecteditems:{type:Array,required:!0},emailSubject:{type:String,required:!0},submodulecode:{type:String,required:!0},callFrom:{type:String}},data:function(){return{emailSubject:"",emailPriorityValue:"",duedate:"",Subject:"",txtemailDescription:"",emailtemplate:[],Message:"",emailtemplateValue:"",modal:[],isView:!1,editor:this.CLASSIC_EDITOR,options:{useCurrent:!1,showClear:!0,showClose:!0}}},created:function(){this.modal=this.modalItem,this.GetEmailTemplate()},methods:{onReady:function(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetEmailTemplate:function(){var t=this,e="id=&type=EMAILTEMPLATE";"CRM_STAGES"==t.submodulecode&&(e="",e="id=&type=CRM_STAGE_EMAILTEMPLATE"),o["a"].getLeaOwnerBySearch(e).then((function(e){var a=e.data;if(null!=a)return t.emailtemplate=a.DATA,t.emailtemplate}))},loadEmailTemplate:function(t){if(""!=t){var e=this,a=t,i="id="+a;o["a"].GetEmailData(i).then((function(t){var a=t.data;null!=a&&(e.Description=a.data[0].template_content)}))}else e.txtemailDescription=""},getSelectedValue:function(t){this.emailtemplateValue=t.target.value,this.loadEmailTemplate(this.emailtemplateValue)},saveEmail:function(t,e){var a=this;a.$refs.form.validate().then((function(t){if(t){var e={templatename:a.emailtemplateValue,selecteditems:a.selectedids,emailSubject:a.emailSubject,emailPriorityValue:a.emailPriorityValue,submodulecode:a.submodulecode,mailStatus:0,emailCc:null,emailBcc:null,body:"CampaignDetails"==a.callFrom?null:a.Description,to:null};if("CampaignDetails"==a.callFrom){e.campaignId=a.$route.params.id;var i=JSON.stringify(e);o["a"].AddGroupEmailTemplate(i).then((function(t){"Success"==t.data[0].Status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}else{i=JSON.stringify(e);o["a"].AddEmailTemplate(i).then((function(t){200==t.status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#Sendbulkmail").addClass("disabled"),$("#ChangeOwnerId").addClass("disabled"),$("#AdditionalOwnerId").addClass("disabled"),$("#CloseLeadId").addClass("disabled"),$("[id^=Delete]").addClass("disabled")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}}}))}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},e615:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".guided-tour-step.guided-tour-step-last .guided-tour-step-tooltip.guided-tour-arrow-top{top:368px!important;bottom:unset!important;right:156px!important;left:unset!important}",""]),t.exports=e}}]);
//# sourceMappingURL=Contract.js.map