(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMManageVendor"],{f281:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"main-content"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{attrs:{id:"divMainLeadData"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 padding-t_8"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("manageVendor")))])])])]),t("div",{staticClass:"border p-3"},[t("Form",{ref:"form"},[t("dynamic-form",{ref:"VendorForm",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}}),t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("small",[t("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("MandatoryString")))])])])])],1)],1)])],1)},o=[],r=t("c7eb"),i=t("1da1"),s=(t("d3b7"),t("159b"),t("b0c0"),t("e9c4"),t("4de4"),t("9769")),l={data:function(){return{isLoading:!1,value:"",LeadData:null,LeadOwner:null,GroupBy:[],Channel:null,IndustryType:null,Status:null,selected:!1,selectoptions:[],submited:!1,vSelectValidate:!1,vendorId:this.$route.params.id,userId:null,username:null,compnayId:null,dateformat:null,FormSchema:[],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}]}},created:function(){this.userId=this.GetUserInfo.ID,this.username=this.GetUserInfo.Name,this.companyId=this.GetUserInfo.CompanyId,this.dateformat=this.GetUserInfo.DateFormat,this.FetchData()},methods:{onSearch:function(e,a,t){var n=this;n.searchSelectData(t,n,a)},searchSelectData:function(e,a,t){this.ShowSearchData(e,a,t)},ShowSearchData:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(a,t,n){var o,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=this,i="id=&&moduleName=CRM&type=CRM_USERS&search=".concat(a,"&refId="),"undefined"==typeof n&&(n=0),n.config.options=[],e.next=6,s["a"].getDDLData(i).then((function(e){n.config.options=[],e.data&&(o.JsonObj=e.data,null!=o.JsonObj&&(e.data.DATA.forEach((function(e){var a={value:e.value,name:e.name};n.config.options.push(a)})),o.$refs.VendorForm.UpdateKeyValue()))}));case 6:case"end":return e.stop()}}),e,this)})));function a(a,t,n){return e.apply(this,arguments)}return a}(),onSubmit:function(e,a){var t=this;this.$refs.form.validate().then((function(e){if(e){t.isLoading=!0;var a=t.$refs.VendorForm.ConvertDynamicFormObjToCustomFieldObj(t.FormSchema);a.forEach((function(e){"created_by"==e.field_name&&(e.field_value=t.userId),"company_id"==e.field_name&&(e.field_value=t.companyId),"vendor_id"==e.field_name&&(e.field_value=t.vendorId),"vendor_owner"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=e.field_value.value)),t.vendorId>0&&"modified_by"==e.field_name&&(e.field_value=t.userId)}));var n={data:a},o=JSON.stringify(n);s["a"].SaveVendor(o).then((function(e){t.isLoading=!1,"1"==e.data[0].Code?(t.vendorId>0?t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Vendor")]),"success",!0,t.$t("Alert")):t.ShowAlert(t.$t("AddedSuccess",[t.$t("Vendor")]),"success",!0,t.$t("Alert")),t.$router.push({name:"CRMVendor"})):t.ShowAlert(t.$t("AddedError",[t.$t("Vendor")]),"failure",!0,t.$t("Alert"))}))}}))},onCancel:function(){this.$router.push({name:"CRMVendor"})},FetchData:function(){var e=this;e.isLoading=!0;var a="recordId=".concat(e.$route.params.id,"&moduleName=CRM&subModuleCode=CRM_VENDORS&langCode=en");s["a"].GetDynamicForm(a).then((function(a){e.isLoading=!1,e.FormSchema=e.$refs.VendorForm.ConvertCustomFieldIntoDynamicFormObj(a.data.data),e.FormSchema.forEach((function(a,t){a.Data.forEach(function(){var a=Object(i["a"])(Object(r["a"])().mark((function a(t,n){var o;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:"status_id"==t.name&&""==t.value&&(t.value=t.config.options.filter((function(e){return"active"==e.name.toLowerCase()}))[0].value),"vendor_owner"==t.name&&(""==t.value?t.value={label:e.username,value:e.userid}:null!=t.config.options?(o=t.config.options.filter((function(e){return e.value==t.value}))[0],t.value={label:o.name,value:o.value}):t.value={label:e.username,value:e.userid},t.config.onSearchChange=e.onSearch,e.onSearch(null,t," ")),t.config.onChange=e.onChangeEventForFields;case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}))}))}}},c=l,d=t("2877"),u=Object(d["a"])(c,n,o,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=CRMManageVendor.js.map