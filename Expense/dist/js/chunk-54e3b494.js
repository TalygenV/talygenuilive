(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54e3b494"],{"51e6":function(e,t,a){"use strict";var s=a("c9cb"),i=a.n(s);i.a},5333:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("Attachments"))+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.CloseExpenseAttachments(t)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"listing"},[e.noRecordForTab?e._e():a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content"}},[e._m(0),a("tbody",e._l(e.attachmentsData,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1)+".")]),a("td",[e._v(e._s(t.EXPENSE_FILE_NAME))]),a("td",[a("a",{staticClass:"round-icon-small btn-primary-light",attrs:{title:"DownloadFile",href:"javascript:;"},on:{click:function(a){return e.downloadAttachment(t)}}},[a("i",{staticClass:"fa fa-download"})]),a("a",{staticClass:"round-icon-small btn-danger-light",attrs:{href:"javascript:;",title:"DeleteFile"},on:{click:function(a){return e.deleteAttachment(t)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])})),0)])])]),e.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(e._s(e.$t("NoRecordfound")))]):e._e()])])])])],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[a("span",[e._v("#")])]),a("th",[a("span",[e._v("FileName")])]),a("th",[a("span",[e._v("Action")])])])])}],n=(a("ddb0"),a("2b3d"),a("9769")),o={props:{expenseid:null,code:{type:String,required:!0}},data:function(){return{isLoading:!1,attachmentsData:[],noRecordForTab:!1,statuscode:"",Expense_Id:""}},created:function(){this.statuscode=this.code,this.Expense_Id=this.expenseid,this.Fetchdata()},methods:{Fetchdata:function(){var e=this,t="expenseid="+e.expenseid;n["a"].GetExpenseFileList(t).then((function(t){e.isLoading=!0,t.data.length>0||""!=t.data?(e.attachmentsData=t.data.DATA,e.noRecordForTab=!1):(e.noRecordForTab=!0,e.attachmentsData=null,e.isLoading=!1),e.isLoading=!1}))},downloadAttachment:function(e){var t=this;t.isLoading=!0;var a=`fileId=${e.EXPENSE_ID}&filePath=${e.EXPENSE_FILE_PATH}&fileType=${e.CONTENT_TYPE}&fileName=${e.EXPENSE_FILE_NAME}&downloadType=single`;n["a"].downloadAttachment(a).then((function(a){t.isLoading=!1;var s=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=s,i.setAttribute("download",e.EXPENSE_FILE_NAME),document.body.appendChild(i),i.click()}))},deleteAttachment:function(e){var t=this;t.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Delete")+"  "+this.$t("Attachment"),(function(){t.isLoading=!0;var a=`fileId=${e.EXPENSE_FILE_ID}&expId=${e.EXPENSE_ID}`;n["a"].DeleteAttachment(a).then((function(e){t.isLoading=!1,200==e.status&&(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Attachment")]),"success",!0,t.$t("Alert")),t.Fetchdata())}))}))},CloseExpenseAttachments:function(e){this.$emit("CloseExpenseAttachments",e)}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,i,!1,null,null,null);t["a"]=c.exports},"65cd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsExpenseListView,expression:"IsExpenseListView"}],attrs:{listType:e.ListView,IsShowAction:!0,showCheckBox:!0,ModuleName:"Expenses",SubModuleCode:"Expenses",IdentityColumn:"expense_id",HeaderText:e.$t("Expense"),ListData:e.ExpenseData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,KanbanDataCallBackFunction:e.FetchDataKanban,SortExp:e.SortExp,SortBy:e.SortBy,LegendArray:e.LegendArray,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return["status_id"==s.column.COLUMN_NAME?[a("a",{staticClass:"inactive-disabled"},["ACT"!=s.row.status_code&&"EXP_APPR_PEND"!=s.row.status_code&&"EXP_SEND_FOR_CORRECTION"!=s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(s.row[s.column.COLUMN_NAME])+" ")]):e._e(),"EXP_APPR_PEND"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("ApprovalPending"))+" ")]):e._e(),"ACT"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("Draft"))+" ")]):e._e(),"EXP_SEND_FOR_CORRECTION"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("SentForCorrection"))+" ")]):e._e()])]:e._e(),"expense_amount"==s.column.COLUMN_NAME?[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.expense_amount)+" "+s.row.Expense_amount_iso_code)+" ")]:e._e(),"CONVERSION_AMOUNT"==s.column.COLUMN_NAME?[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.CONVERSION_AMOUNT)+" "+s.row.convertion_amount_iso_code)+" ")]:e._e()]}},{key:"customcard",fn:function(t){var s=t.data;return[a("div",{staticClass:"card-box expense-card text-center pb-2",class:e.getStatusClassCard(s.row.status_code)},[a("div",{staticClass:"expense-card-header"},[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"chkItems",staticStyle:{display:"none"},attrs:{type:"checkbox",disabled:s.row.isCheckBoxDisabled,id:"chk_11"},domProps:{value:s.row.expense_id},on:{change:function(t){return e.OnChange()}}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_11"}})]),a("span",{staticClass:"expense-icon"},[a("i",{staticClass:"fa  fa-file-text-o"})]),a("a",{staticClass:"text-truncate expense-title",staticStyle:{cursor:"default"},attrs:{title:"",value:s.row.expense_id,"data-toggle-tooltip":"tooltip","data-original-title":"text"}},[e._v(e._s(s.row.expense_title))])]),a("div",{staticClass:"card-detail-main"},[a("div",{staticClass:"expense-project-date"},[a("span",[e._v(e._s(s.row.project_id))]),a("span",[e._v(e._s(e.$options.filters.formatDate(s.row.expense_date)))]),e._v(e._s(s.row.rownumber)+" ")])]),a("div",{staticClass:"expense-amount"},[a("div",{staticClass:"Task"},[a("span",{staticClass:"t-title"},[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.expense_amount)+" "+s.row.Expense_amount_iso_code))])])]),a("a",{class:{"read-more-content":!0,hide:1==e.ShowMoreFalse},attrs:{id:"a"+s.row.rownumber,href:"javascript:;"},on:{click:function(t){return e.ShowMore("showdiv"+s.row.rownumber)}}},[e._v(e._s(e.$t("More")))]),a("div",{class:{"read-more-content":!0,hide:0==e.ShowMoreFalse},attrs:{id:"showdiv"+s.row.rownumber}},[a("div",{staticClass:"expense-project-date border-top float-left"},[a("span",[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("expense_category_id")))]),e._v(e._s(s.row.expense_category_id))]),a("span",[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("trip_id")))]),e._v(e._s(s.row.trip_id))])]),a("div",{staticClass:"text-center",attrs:{id:"showdiv"+s.row.rownumber}},[a("span",{staticClass:"border-0"},[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("OrignalConversionAmount")))]),e._v(e._s(e.convertDecimalValueInFormat(s.row.CONVERSION_AMOUNT)+" "+s.row.convertion_amount_iso_code))])]),a("a",{class:{"read-more-hide":!0,"":1==e.ShowMoreFalse},attrs:{id:"cardMoreDataLess",href:"javascript:;"},on:{click:function(t){return e.ShowLess("showdiv"+s.row.rownumber)}}},[e._v(e._s(e.$t("Less")))])]),a("div",{staticClass:"verticle-action"},[a("em",{staticClass:"fa fa-ellipsis-v action_icon",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.openActionIcon(t)}}}),a("span",{staticClass:"action-list-box",staticStyle:{width:"240px",display:"none"}},[a("span",{staticClass:"list-actions fsm-list",staticStyle:{"padding-left":"0"},attrs:{id:"action-list"}},["ACT"==s.row.status_code||"EXP_SEND_FOR_CORRECTION"==s.row.status_code||"yes"==e.DisableExpense&&"Timesheet"==e.approvalTypeForTime?a("a",{staticClass:"update actions-onclick",on:{click:function(t){return e.ExpenseEdit(s.row.expense_id)}}},[a("em",{staticClass:"fa fa-pencil action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("Edit")))])]):e._e(),s.row.filescount>0?a("a",{staticClass:"update actions-onclick",class:{disabled:0==s.row.filescount},attrs:{href:"javascript:;"},on:{click:function(t){return e.OpenFileModal(s.row)}}},[a("em",{staticClass:"fa fa-eye action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("ViewAttachedFile")))])]):e._e(),0!=s.row.commentscount||("CA"==e.usertype||"PM"==e.usertype||"NU"==e.usertype)&&"ACT"!=s.row.status_code?a("a",{staticClass:"update actions-onclick",on:{click:function(t){return e.openAddNewEvent(s.row)}}},[a("em",{staticClass:"fa fa-comment action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("Comments")))])]):e._e(),"ACT"==s.row.status_code||"EXP_SEND_FOR_CORRECTION"==s.row.status_code||"yes"==e.DisableExpense&&"Timesheet"==e.approvalTypeForTime?a("a",{staticClass:"actions-onclick",attrs:{href:"javascript:;"},on:{click:function(t){return e.SendForApproval(s.row)}}},[a("em",{staticClass:"fa fa-file text-warning action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("SendForApprovalTitle")))])]):e._e(),a("em",{staticClass:"fa fa-times close close-action",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.closeActionIcon(t)}}})])])])])]}}])}),e.showFileModal?a("ExpenseAttachents",{attrs:{expenseid:e.expid,code:e.statuscode},on:{CloseExpenseAttachments:e.CloseExpenseAttachments}}):e._e(),e.showCommentModal?a("ExpenseComments",{attrs:{access:e.access,expenseid:e.expid,CommentHeader:e.CommentHeader,isSingleCommentforMultipleExpenses:e.isSingleCommentforMultipleExpenses,statuscode:e.statuscode,visibility:e.visibility},on:{CloseExpenseComments:e.CloseExpenseComments,fetchdata:e.FetchData}}):e._e()],1)},i=[],n=a("9769");let o=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Expense",iconClass:"fa fa-plus",callbackfunction:"openaddExpense",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"AddExpense"},{title:"Send For Approval",iconClass:"fa fa-send",callbackfunction:"ExpensesSendForApproval",additionalClass:"",isdisabled:!0,isvisible:!0,id:"SendForApproval"},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],r=[{fieldName:"Project",fieldType:"ddl-check",fieldIcon:"fa-file",fieldSearchConditionName:["PRO.PROJECT_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["Status.status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"DATE",fieldType:"date-range",fieldIcon:"fa-calendar",fieldSearchConditionName:["expense_date|expense_date"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",secondValue:"",listOptions:[]}],l=[{title:"Edit Expense",icon:"fa fa-pencil action-icon",additionalSpan:"",callbackfunction:"Edit"},{title:"View Files",href:"javascript:void(0)",callbackfunction:"OpenFileModal",icon:"fa fa-eye text-primary action-icon",additionalSpan:""},{title:"Comments",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-comment",additionalSpan:""},{title:"Send For Approval",callbackfunction:"SendForApproval",href:"javascript:void(0)",icon:"fa fa-file text-warning action-icon",additionalSpan:""}];function c(e,t,a){var s=e;let i={};i["moduleName"]=t,i["type"]=a,n["a"].GetDDLData(i).then((function(e){var t=e.data;if(null!=t)return"EXPENSE_PROJECT"==a?(s.leftSearchFields[0].listOptions=t.DATA,s.ExpenseProjectList=t.DATA,s.ExpenseProjectList):(s.leftSearchFields[1].listOptions=t.DATA,s.ExpenseStatusList=t.DATA,s.ExpenseStatusList)}))}var d={buttons:o,leftsearchSchema:r,listActions:l,bindleftCommonSearchdropdown:c},p=a("5333"),m=a("9d1d"),u={components:{ExpenseAttachents:p["a"],ExpenseComments:m["a"]},data(){return{isSingleCommentforMultipleExpenses:null,CommentHeader:"",isLoading:!1,searchCondition:"",TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",Headers:[],StatusList:[],ExpenseData:[],cardViewData:[],kanbanViewData:[],listheaderbuttons:d.buttons,leftSearchFields:d.leftsearchSchema,noRecord:!1,CurrentPage:1,TotalPages:0,IsExpenseListView:!0,IsExpenseListViewHide:!1,IsExpenseCardView:!1,IsExpenseCardViewHide:!0,IsExpenseKanbanView:!1,IsExpenseKanbanViewHide:!0,listActions:d.listActions,showFileModal:!1,expid:"",statuscode:"",ExpenseStatusList:null,conditionForInstantSearch:"",showCommentModal:!1,showCommentModal:!1,StatusListForListing:[],widgets:[{icon:"fa fa-dollar",value:"",name:"Total Expenses",class:"one_wid"},{icon:"fa fa-dollar",value:"",name:"Approved Expenses",class:"two_wid"},{icon:"fa fa-clock-o",value:"",name:"Approval Pending",class:"three_wid"},{icon:"fa fa-reply",value:"",name:"Send for Correction",class:"four_wid"}],LegendArray:[{class:"colorboxsquare legend-darft",text:this.$t("Draft",["Expenses"])},{class:"legend-Progress colorboxsquare",text:this.$t("Approved",["Expenses"])},{class:"legend-pending colorboxsquare",text:this.$t("Pending",["Expenses"])},{class:"colorboxsquare legend-send-for-correction",text:this.$t("SendForCorrection",["Expenses"])},{class:"colorboxsquare legend-Reject",text:this.$t("Rejected",["Expenses"])}],ShowMoreFalse:!1,visibility:0,access:1,DisableExpense:"",approvalTypeForTime:"",privilegeParams:null,ListView:["List","Card"]}},created:function(){var e=this;e.usertype=e.GetUserInfo.UserType,e.companyId=e.GetUserInfo.CompanyId,e.GetExpenseStatusList(),e.onStatusList(),e.FetchData(),e.getStatuslistForListing("Expense","en"),d.bindleftCommonSearchdropdown(e,"Expense","EXPENSE_PROJECT"),d.bindleftCommonSearchdropdown(e,"Expense","EXPENSE_STATUS"),e.GetConfigurationValue("PerDiemAllowed"),e.GetConfigurationValueKey("ApprovalTypeForTime")},updated:function(){this.BindActionButtonEvent(),this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{openActionIcon(e){e.target.nextSibling.removeAttribute("style"),e.target.nextSibling.setAttribute("style","width:240px;"),e.target.nextSibling.style.display="block"},closeActionIcon(e){e.target.nextSibling.style.display="none"},getStatusClassList:function(e){var t="";switch(e){case"ACT":t="px-2 text-center text-white d-block bg-info";break;case"EXP_APPROVED":t="px-2 text-center text-white d-block bg-success";break;case"EXP_APPR_PEND":t="px-2 text-center text-white d-block bg-warning";break;case"EXP_REJECTED":t="px-2 text-center text-white d-block bg-danger";break;case"EXP_SEND_FOR_CORRECTION":t="px-2 text-center text-white d-block bg-orange";break;default:t=""}return t},getStatusClassCard:function(e){var t="";switch(e){case"ACT":t="ex-blue-bg-light";break;case"EXP_APPROVED":t="ex-green-bg-light";break;case"EXP_APPR_PEND":t="ex-yellow-bg-light";break;case"EXP_REJECTED":t="ex-red-bg-light";break;case"EXP_SEND_FOR_CORRECTION":t="ex-orange-bg-light";break;case"Draft":t="ex-blue-bg-light";break;default:t=""}return t},DisableInputBox:function(e){var t="";switch(e){case"Approved":case"Active":case"ApprovalPending":case"Rejected":t="disbaled";break;case"SentForCorrection":case"Draft":t="disbaled";break;default:t=""}return t},updateURLParameter(e,t,a){var s="",i=e.split("?"),n=i[0],o=i[1],r="";if(o){i=o.split("&");for(var l=0;l<i.length;l++)i[l].split("=")[0]!=t&&(s+=r+i[l],r="&")}var c=r+""+t+"="+a;return n+"?"+s+c},ShowMore(e){$("#"+e).show(),$("#a"+e.split("v")[1]).hide()},ShowLess(e){$("#"+e).hide(),$("#a"+e.split("v")[1]).show()},FetchData:function(){var e=this;if(e.IsExpenseKanbanView)return e.FetchDataKanban(),!1;e.isLoading=!0;const t=this.getRequestParams(this.sortBy,this.sortExp,this.pageSize,this.pageNumber,this.isPaged,this.searchcondition);t.pageSize=e.PageSize,t.pageNumber=e.PageNumber,t.searchCondition=e.searchCondition,e.PageNumber?t.pageNumber=e.PageNumber:e.PageNumber=t.pageNumber=1,"undefined"!=typeof e.isPaged?t.isPaged=e.isPaged:e.isPaged=t.isPaged=1,t.isPaged=e.isPaged,t.sortBy=e.SortBy,t.sortExp=e.SortExp;var a="";e.isBlank(e.searchCondition)||(a+=e.searchCondition),e.isBlank(e.conditionForInstantSearch)||(a+=e.isBlank(e.searchCondition)?e.conditionForInstantSearch:" AND "+e.conditionForInstantSearch),""!=a&&(t.searchCondition=a),n["a"].ExpenseListing(t).then((function(t){e.isLoading=!1,null!=t.data?(e.Headers=t.data.schema,e.Headers.forEach(e=>{e.settings=null,"status_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Status",e.settings={isInSlot:!0,isForTag:!0}),"expense_amount"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Amount",e.settings={isInSlot:!0}),"expense_category_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Expense Category"),"CONVERSION_AMOUNT"==e.COLUMN_NAME&&(e.DATA_TYPE="string",e.settings={isInSlot:!0})}),t.data.data.length>0?(e.ExpenseData=[],e.TotalRecords=0,e.ExpenseData=t.data.data,e.ExpenseData.forEach(e=>{e.isCheckBoxDisabled=!1,"ACT"!=e.status_code&&"EXP_SEND_FOR_CORRECTION"!=e.status_code&&(e.isCheckBoxDisabled=!0)}),e.cardViewData=e.ExpenseData,e.TotalRecords=t.data.data[0].total_records,0==t.data.total_expenses_widget.length?e.TotalExpenseWidget=0:e.widgets[0].value=e.convertDecimalValueInFormat(t.data.total_expenses_widget[0]),0==t.data.approved_expense_widget.length?e.ApprovedExpenseWidget=0:e.widgets[1].value=e.convertDecimalValueInFormat(t.data.approved_expense_widget[0]),0==t.data.approval_pending_widget.length?e.PendingExpenseWidget=0:e.widgets[2].value=t.data.approval_pending_widget[0],0==t.data.send_for_correction_widget.length?e.SendForCorrectionWidget=0:e.widgets[3].value=t.data.send_for_correction_widget[0],$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='SendForApproval']").removeClass("enable").addClass("disabled"),$("[id^='DeleteMultiple']").removeClass("enable").addClass("disabled"),$(".close-action_cv").parent().parent(".action-list-box").animate({width:"0px"},200),e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.ExpenseData=[],e.TotalRecords=0)):(e.noRecord=!0,e.ExpenseData=[],e.Headers=[],e.TotalRecords=0),setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},getStatuslistForListing:function(e,t){var a=this,s="langCode="+t+"&statusType="+e+"&hasglobal=true";n["a"].statusdropdown(s).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},getRequestParams:function(e,t,a,s,i,n){let o={};return s&&(o["pageNumber"]=s),n&&(o["searchcondition"]=n),i&&(o["isPaged"]=i),e&&(o["sortBy"]=e),t&&(o["sortExp"]=t),a&&(o["pageSize"]=a),o},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(s=>{let i={...s};switch(i.title){case"Edit Expense":"ACT"==e.status_code||"EXP_SEND_FOR_CORRECTION"==e.status_code?"yes"==this.DisableExpense&&"Timesheet"==this.approvalTypeForTime?i.isVisible=!1:i.isVisible=!0:i.isVisible=!1;break;case"View Files":i.isVisible=0!=e.filescount;break;case"Comments":i.isVisible=0!=e.commentscount||("CA"==t.usertype||"PM"==t.usertype||"NU"==t.usertype)&&"ACT"!=e.status_code;break;case"Send For Approval":"ACT"==e.status_code||"EXP_SEND_FOR_CORRECTION"==e.status_code?"yes"==this.DisableExpense&&"Timesheet"==this.approvalTypeForTime?i.isVisible=!1:i.isVisible=!0:i.isVisible=!1;break;default:i.isVisible=!0}a.push(i)}),a},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},actionButtonClick:function(e,t){switch(e){case"Edit":this.ExpenseEdit(t.expense_id);break;case"OpenFileModal":this.OpenFileModal(t);break;case"openAddNewEvent":this.openAddNewEvent(t);break;case"SendForApproval":this.SendForApproval(t);break}},OpenFileModal:function(e){this.privilegeParams="controller=Expenses&action=",n["a"].CheckPrivilege(this.privilegeParams+"GetExpenseFileList").then(t=>{1==t.data?(this.showFileModal=!0,this.expid=e.expense_id,this.statuscode=e.status_code):this.ShowAlert(this.$t("NotAuthorizedSection"),"failure",!0,"Alert")})},CloseExpenseAttachments:function(){this.showFileModal=!1},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"openaddExpense":this.openaddExpense();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break;case"ExpensesSendForApproval":this.CommonApproval();break;case"commonDeleteData":this.commonDeleteData();break}},openaddExpense:function(){this.privilegeParams="controller=Expenses&action=",this.isLoading=!0,n["a"].CheckPrivilege(this.privilegeParams+"Add").then(e=>{1==e.data?this.$router.push({path:"/Expenses/Add/0",params:{id:"0"}}):this.ShowAlert(this.$t("NotAuthorizedSection"),"failure",!0,"Alert"),setTimeout((function(){this.isLoading=!1}),1e3)})},OnChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?($("#SendForApproval").removeClass("disabled"),$("#DeleteMultiple").removeClass("disabled")):($("#SendForApproval").addClass("disabled"),$("#DeleteMultiple").addClass("disabled"))},FetchDataKanban:function(e){var t=this,a="pagesize="+this.PageSize+"&pagenumber="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp,s="";this.isBlank(this.searchCondition)||(a=a+"&searchCondition="+this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(s+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=s&&(a=a+"&searchCondition="+s),n["a"].ExpenseKanbanListing(a).then((function(e){null!=e.data?(e.data.schema.forEach(e=>{"status_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Status")}),"undefined"!=typeof e.data.data&&(t.TotalRecords=e.data.total_records[0],t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,0==e.data.approved_expense.length?t.ApprovedExpense=0:t.ApprovedExpense=e.data.approved_expense[0],0==e.data.pending_expense.length?t.PendingExpense=0:t.PendingExpense=e.data.pending_expense[0],0==e.data.active_expense.length?t.ActiveExpense=0:t.ActiveExpense=e.data.active_expense[0],0==e.data.send_for_correction.length?t.SendForCorrectionExpense=0:t.SendForCorrectionExpense=e.data.send_for_correction[0],0==e.data.rejected_expense.length?t.RejectedExpense=0:t.RejectedExpense=e.data.rejected_expense[0],0==e.data.total_expenses_widget.length?t.TotalExpenseWidget=0:t.TotalExpenseWidget=e.data.total_expenses_widget[0],0==e.data.approved_expense_widget.length?t.ApprovedExpenseWidget=0:t.ApprovedExpenseWidget=e.data.approved_expense_widget[0],0==e.data.approval_pending_widget.length?t.PendingExpenseWidget=0:t.PendingExpenseWidget=e.data.approval_pending_widget[0],0==e.data.send_for_correction_widget.length?t.SendForCorrectionWidget=0:t.SendForCorrectionWidget=e.data.send_for_correction_widget[0]),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$("[id^='aCommanApproval']").removeClass("enable").addClass("disabled")):(t.ApprovedExpense=0,t.PendingExpense=0,t.SendForCorrectionExpense=0,t.RejectedExpense=0),t.MaxCount=Math.max(t.ApprovedExpense,t.PendingExpense,t.SendForCorrectionExpense,t.RejectedExpense),null!=e.data&&e.data.data.length>0?(t.Headers=e.data.schema,"undefined"!=typeof e.data.data?(t.ExpenseData=e.data.data,parseInt($("#hdfStartIndex").val(),10)>1?t.kanbanViewData.push.apply(t.kanbanViewData,t.ExpenseData):t.kanbanViewData=t.ExpenseData,setTimeout("CheckBoxBootstrap()",100),setTimeout("ResponsiveDataTable('tablelistingdata')",500),t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.ExpenseData=[],t.noRecord=!0,t.kanbanViewData=[],t.TotalRecords=0)):(t.TotalRecords<=0&&(t.ExpenseData=[]),t.kanbanViewData=[],t.Headers=e.data.schema)}))},commonDeleteData:function(e){var t=this;t.privilegeParams="controller=Expenses&action=",n["a"].CheckPrivilege(t.privilegeParams+"Delete").then(e=>{if(1==e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Expenses"),(function(){var e={ids:a,moduleName:"Expenses",subModuleCode:"EM_EXPENSE"},s=JSON.stringify(e);n["a"].CommonDeleteData(s).then((function(e){"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$("[id^='aCommanApproval']").removeClass("enable").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Expense")]),"Success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<0&&(t.PageNumber=1),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Expense")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))}else t.ShowAlert(t.$t("NotAuthorizedSection"),"failure",!0,"Alert")})},CommonApproval:function(e){var t=this;t.privilegeParams="controller=Expenses&action=",n["a"].CheckPrivilege(t.privilegeParams+"SentForApproval").then(e=>{if(1==e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&t.confirmR(t.$t("ConfirmApproval"),!0,"Confirm",(function(){var e="ExpenseId="+a;n["a"].SendForApproval(e).then((function(e){200==e.status?t.FetchData():t.ShowAlert(t.$t("SelectAnyExpenseToApproval"),"warning",!0,t.$t("Alert")),t.isLoading=!1}))}))}else t.ShowAlert(t.$t("NotAuthorizedSection"),"failure",!0,"Alert")})},SendForApproval:function(e){var t=this;t.privilegeParams="controller=Expenses&action=",n["a"].CheckPrivilege(t.privilegeParams+"SentForApproval").then(a=>{1==a.data?t.confirmR(t.$t("ConfirmApproval"),!0,"Confirm",(function(){var a="ExpenseId="+e.expense_id;n["a"].SendForApproval(a).then((function(e){200==e.status&&(t.ShowAlert(t.$t("ExpenseApproveSendForApproval",[t.$t("SendForApproval")]),"success",!0,t.$t("Alert")),t.FetchData())}))})):t.ShowAlert(t.$t("NotAuthorizedSection"),"failure",!0,"Alert")})},openAddNewEvent:function(e){this.privilegeParams="controller=ExpenseApproval&action=",n["a"].CheckPrivilege(this.privilegeParams+"CommentsList").then(t=>{1==t.data?(this.CommentHeader="Comment",this.isSingleCommentforMultipleExpenses=0,this.showCommentModal=!0,this.expid=String(e.expense_id),this.statuscode=e.status_id,this.visibility=1,this.access=0):this.ShowAlert(this.$t("NotAuthorizedSection"),"failure",!0,"Alert")})},CloseExpenseComments:function(){this.showCommentModal=!1},GetExpenseStatusList:function(){var e=this,t="moduleName=Expense&type=EXPENSE_STATUS";n["a"].getDDLData(t).then((function(t){var a=t.data;null!=a&&(e.leftSearchFields[1].listOptions=a.DATA,e.ExpenseStatusList=a.DATA)}))},onStatusList:function(){var e=this,t=`langCode=en&companyId=${this.companyId}&statusType=Expense&hasglobal=true`;n["a"].GetStatusDDLData(t).then((function(t){if("Success"==t.data.status){var a=t.data.result;e.StatusList=a.data,e.activeData=$.grep(e.StatusList,(function(e,t){return"ACT"==e.STATUS_CODE})),e.ApprovedData=$.grep(e.StatusList,(function(e,t){return"EXP_APPROVED"==e.STATUS_CODE}))}}))},GetConfigurationValue:function(e){var t="ConfigurationValueByKey="+e;n["a"].GetConfigurationValue(t).then(e=>{this.DisableExpense=e.data.CONFIG_DATA_VALUE})},GetConfigurationValueKey:function(e){var t="ConfigurationValueByKey="+e;n["a"].GetConfigurationValue(t).then(e=>{this.approvalTypeForTime=e.data.CONFIG_DATA_VALUE})},ExpenseEdit:function(e){this.privilegeParams="controller=Expenses&action=",this.isLoading=!0,n["a"].CheckPrivilege(this.privilegeParams+"AddEdit").then(t=>{1==t.data?this.$router.push({path:"/Expenses/Add/"+e}):this.ShowAlert(this.$t("NotAuthorizedSection"),"failure",!0,"Alert"),setTimeout((function(){this.isLoading=!1}),1e3)})}}},h=u,C=(a("51e6"),a("2877")),v=Object(C["a"])(h,s,i,!1,null,null,null);t["default"]=v.exports},"9d1d":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(this.CommentHeader)+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.CloseExpenseComments()}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"CommentForm",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.valid,i=t.errors;return[1==e.visibility?a("div",{class:{"d-none":1==e.showModelClientCompany}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Title"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Title",rules:{required:!0},label:"Title"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.CommentTitle,expression:"CommentTitle"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{name:"Title",id:"Title",type:"text",maxlength:"100"},domProps:{value:e.CommentTitle},on:{input:function(t){t.target.composing||(e.CommentTitle=t.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0},label:"Description"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Commentdesc,expression:"Commentdesc"}],class:{"form-control":!0,"is-invalid":s[0]},staticStyle:{"max-height":"300px!important","min-height":"100px!important"},attrs:{maxlength:"250",id:"description",name:"Description"},domProps:{value:e.Commentdesc},on:{input:function(t){t.target.composing||(e.Commentdesc=t.target.value)}}}),e._v(" "),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),1==e.access?a("div",{staticClass:"form-group"},[a("label",[e._v("Visibility:"),a("span",{staticClass:"text-danger"})]),a("div",{staticClass:"form-control pl-0 border-0"},[a("Field",{attrs:{name:"ReimburseBy",rules:{required:!0},label:"Reimburse By"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Public",value:"Public",name:"Public"},domProps:{checked:e._q(e.SelectedVale,"Public")},on:{change:function(t){e.SelectedVale="Public"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Client"}},[e._v(e._s(e.$t("Public")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Private",value:"Private",name:"Company"},domProps:{checked:e._q(e.SelectedVale,"Private")},on:{change:function(t){e.SelectedVale="Private"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Company"}},[e._v(e._s(e.$t("Private")))])]),s[0]?a("span",{ref:"Visibility",staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)]):e._e()]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"row flex-row-reverse"},[1==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-danger mr-2",attrs:{title:"Skip",href:"javascript:;"},on:{click:function(t){return e.Skip(s,i)}}},[a("span",[e._v(e._s(e.$t("Skip")))]),a("em",{staticClass:"fa fa-forward pl-2"})]),a("a",{staticClass:"btn btn-success",attrs:{title:e.$t("PostNewComment"),href:"javascript:;"},on:{click:function(t){return e.APostNewComment(s,i)}}},[a("em",{staticClass:"fa fa-send pr-2"}),a("span",[e._v(e._s(e.$t("PostNewComment")))])])]):e._e(),0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success",attrs:{id:"postcomment",title:e.$t("PostNewComment"),href:"javascript:;"},on:{click:function(t){return e.PostNewComment(s,i)}}},[a("em",{staticClass:"fa fa-send pr-2"}),e._v(e._s(e.$t("PostNewComment")))])]):e._e(),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger mandatory"},[e._v(e._s(e.$t("MandatoryString")))])])])])])])]):e._e(),1==e.isSingleCommentforMultipleExpenses?a("div",[a("div",{staticClass:"col-lg-12"},[e.showModelClientCompany?a("div",{staticClass:"row"},[a("div",{staticClass:"w-100 col-12"},[a("div",{staticClass:"alert alert-warning mb-3"},[e._v(" "+e._s(e.$t("ExpenseEntryWillBeReimbursedBy"))+" ")]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("ReimburseBy"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"form-control pl-0 border-0"},[a("Field",{attrs:{name:"ReimburseBy",rules:{required:!0},label:"Reimburse By"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Client",value:"Client",name:"ReimburseBy"},domProps:{checked:e._q(e.SelectedVale,"Client")},on:{change:function(t){e.SelectedVale="Client"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Client"}},[e._v(e._s(e.$t("Client")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Company",value:"Company",name:"ReimburseBy"},domProps:{checked:e._q(e.SelectedVale,"Company")},on:{change:function(t){e.SelectedVale="Company"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Company"}},[e._v(e._s(e.$t("Company")))])]),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"col-lg-12 text-right p-0"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success",attrs:{title:"submit",href:"javascript:;"},on:{click:function(t){return e.SubmitExpenseApproval(s,i,"Skip")}}},[a("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Submit")))])])])])]):e._e()])]):e._e()]}}])}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"listing"},[a("div",{staticClass:"w-100 activity-tab",attrs:{id:"Expenseaccordion"}},e._l(e.CommentExpenseData,(function(t,s){return a("div",{key:s,staticClass:"card"},[a("div",{staticClass:"card-header"},[a("a",{staticClass:"card-link collapsed",attrs:{"data-toggle":"collapse",href:"#Expensecollapse"+s}},[a("div",{staticClass:"conversation-date heading-border"},[a("span",[a("em",{staticClass:"pr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(t.groupKey))])])])]),a("div",{class:{collapse:!0,show:0==s},attrs:{id:"Expensecollapse"+s}},e._l(t.groupData,(function(s,i){return a("div",{key:i,staticClass:"card-body"},[1==s.EXPENSE_ACCESS?a("div",{staticClass:"conversation-main"},[a("div",{staticClass:"conversation-time"},[a("span",[e._v(e._s(e.$options.filters.formatTime(s.CREATED_AT)))])]),a("div",{staticClass:"conversation-box-con"},[a("div",{staticClass:"conversation-box"},[a("div",{staticClass:"name-circle light-yellow"},[a("img",{staticClass:"img-circle avatar",attrs:{src:e.blobUrl,width:"51",height:"51",alt:"Image"}})]),a("div",{staticClass:"conversation-header addednote-ticket"},[a("span",[a("span",{staticClass:"sender-name"},[e._v(e._s(s.EXPENSE_COMMENT_TITLE))]),a("span",{staticClass:"sender-department",attrs:{title:t.EXPENSE_COMMENT_DESC}},[e._v(" ("+e._s(s.EXPENSE_COMMENT_DESC)+")")])])]),a("div",{staticClass:"conversation-content"},[a("div",{staticClass:"col-12 p-0 notesdata"},[a("h6",{staticClass:"text-muted time"},[a("i",[a("b",[e._v(e._s(s.CREATED_BY))]),e._v(", "+e._s(e.$t("PostedOn"))+": "),a("span",{staticClass:"text-danger"},[e._v(e._s(e.$options.filters.formatDateTime(s.CREATED_AT)))])])])])])])])]):e._e(),0==s.EXPENSE_ACCESS?a("div",{staticClass:"conversation-main"},[a("div",{staticClass:"conversation-time"},[a("span",[e._v(e._s(s.CREATED_AT))])]),a("div",{staticClass:"conversation-box-con"},[a("div",{staticClass:"conversation-box"},[a("div",{staticClass:"name-circle light-yellow"},[a("img",{staticClass:"img-circle avatar",attrs:{src:e.blobUrl,width:"51",height:"51",alt:"Image"}})]),a("div",{staticClass:"conversation-header addednote-ticket"},[a("span",[a("span",{staticClass:"sender-department"},[e._v(" "+e._s(s.EXPENSE_COMMENT_DESC))])])]),a("div",{staticClass:"conversation-content"},[a("div",{staticClass:"col-12 p-0 notesdata"},[a("h6",{staticClass:"text-muted time"},[a("i",[a("b",[e._v(e._s(s.CREATED_BY))]),e._v(", "+e._s(e.$t("PostedOn"))+": "),a("span",{staticClass:"text-danger"},[e._v(e._s(s.CREATED_AT))])])])])])])])]):e._e()])})),0)])})),0)]):e._e(),e.noRecordForTab&&0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"text-center text-danger border p-3 mt-4"},[e._v(e._s(e.$t("NoRecordfound")))]):e._e()])])],1)])])])])},i=[],n=a("9769"),o={props:{expenseid:{type:String,required:!0},CommentHeader:{type:String,required:!0},isSingleCommentforMultipleExpenses:{type:Number,required:!0},statuscode:{type:String,required:!0},visibility:{type:Number,required:!0},access:{type:Number,required:!0}},data:function(){return{isLoading:!1,CommentTitle:"",Commentdesc:"",Expense_Id:"",userid:"",usertype:"",CommentExpenseData:[],showModelClientCompany:!1,SelectedVale:"",objectPostString:"",noRecordForTab:!0,SkipParam:!1,containerName:null,avatar:"",blobUrl:""}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.containerName=this.GetUserInfo.ContainerName,this.CommentList(),this.GetBlobUrl()},updated:function(){this.CommentList(),this.GetBlobUrl()},methods:{GetBlobUrl:function(){n["a"].GetBlobUrl().then(e=>{var t=e.data[0].CONFIG_DATA_VALUE;null==this.avatar?this.blobUrl="/Content/images/DefaultImages/uc_user_new.jpg":this.blobUrl=t+"/"+this.containerName+"/Upload/UserProfileImage/"+this.avatar})},Skip:function(){this.showModelClientCompany=!0,this.CommentTitle="",this.Commentdesc="",this.SkipParam=!0},CloseExpenseComments:function(){this.$emit("CloseExpenseComments")},PostNewComment:function(e,t){var a=this;a.$refs.CommentForm.validate().then(e=>{if(e){var t={ExpenseCommentId:0,CommentTitle:a.CommentTitle,Commentdesc:a.Commentdesc,Expense_Id:a.expenseid,EXPENSE_ACCESS:1,StatusId:1001},s=JSON.stringify(t);n["a"].SaveComment(s).then((function(e){200==e.status&&(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Comments")]),"success",!0,a.$t("Alert")),a.noRecordForTab=!1,a.CommentTitle="",a.Commentdesc="",a.$refs.CommentForm.reset(),a.CommentList())}))}})},APostNewComment:function(e,t){var a=this;a.$refs.CommentForm.validate().then(e=>{a.$refs.CommentForm.errors.ReimburseBy.length>0&&(a.$refs.Visibility.outerHTML="",e=!0),a.$refs.CommentForm.errors.Description.length>0&&(e=!1),a.$refs.CommentForm.errors.Title.length>0&&(e=!1),e?"EXP_SEND_FOR_CORRECTION"==a.statuscode?(a.showModelClientCompany=!1,a.noRecordForTab=!1,a.SubmitExpenseApproval()):0==a.SkipParam&&(a.showModelClientCompany=!1,a.SubmitExpenseApproval()):console.log(a.$refs.CommentForm.errors)})},CommentList:function(){var e=this;e.isLoading=!0;var t="id="+e.expenseid;n["a"].CommentsList(t).then((function(t){if(null!=t.data){e.CommentExpenseData=[];var a=t.data,s="";$.each(a,$.proxy((function(t,i){s=e.$options.filters.formatDate(i.CREATED_AT);var n=$.grep(e.CommentExpenseData,(function(e,t){return e.groupKey==s}));if(0==n.length){var o=$.grep(a,(function(t,a){return e.$options.filters.formatDate(t.CREATED_AT)==s}));if(o.length>0){var r={groupKey:s,groupData:o};e.CommentExpenseData.push(r),e.avatar=e.CommentExpenseData[0].groupData[0].avatar,e.noRecordForTab=!1}}}),this))}else e.noRecordForTab=!0,e.ExpenseData=[];e.ExpenseData=[],e.isLoading=!1}))},SubmitExpenseApproval:function(e,t,a){var s=this;s.$refs.CommentForm.validate().then(e=>{if("Skip"==a?(s.$refs.CommentForm.errors.Description.length>0&&(e=!0),s.$refs.CommentForm.errors.Title.length>0&&(e=!0),s.$refs.CommentForm.errors.ReimburseBy.length>0&&(e=!1)):e=!0,e){var t="";"EXP_APPROVED"==s.statuscode&&(t=s.$t("ExpenseApprove")),"EXP_REJECTED"==s.statuscode&&(t=s.$t("ExpenseReject")),"EXP_SEND_FOR_CORRECTION"==s.statuscode&&(t=s.$t("ExpenseApproveSendForCorrection")),s.confirmR(t,!0,s.$t("Delete")+"  "+s.$t("ExpenseApproval"),(function(){var e=`ids=${s.expenseid}&statusCode=${s.statuscode}&approvalTypeId=2&CommentTitle=${s.CommentTitle}&Commentdesc=${s.Commentdesc}&commentAccess=1&isForciable=0&isOverridable=0&reimburseBy=${s.SelectedVale}`;n["a"].AddApproverStatusListing(e).then((function(e){200==e.status&&("EXP_APPROVED"==s.statuscode?(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='SendForReject']").removeClass("enable").addClass("disabled"),$("[id^='SendForApprove']").removeClass("enable").addClass("disabled"),s.ShowAlert(s.$t("ExpenseApproveReject",[s.$t("Approve")]),"success",!0,s.$t("Alert"))):"EXP_REJECTED"==s.statuscode?(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='SendForReject']").removeClass("enable").addClass("disabled"),$("[id^='SendForApprove']").removeClass("enable").addClass("disabled"),s.ShowAlert(s.$t("ExpenseApproveReject",[s.$t("Decline")]),"success",!0,s.$t("Alert"))):(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),s.ShowAlert(s.$t("ExpenseApproveSendForCorrection",[s.$t("SendForCorrection")]),"success",!0,s.$t("Alert"))))}))}))}})}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,i,!1,null,null,null);t["a"]=c.exports},c9cb:function(e,t,a){var s=a("dca5");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("49344702",s,!0,{sourceMap:!1,shadowMode:!1})},dca5:function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".dashbord-widget i{float:right;font-size:35px;color:#8b9197}.bg-orange{background-color:#fe6847}.expense-card .custom-control{top:0;left:4px}.legend-darft{background:#17a2b8}.legend-send-for-correction{background:#fe6847}.legend-Reject{background:#ee1313}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-54e3b494.js.map